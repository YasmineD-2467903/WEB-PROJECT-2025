<!DOCTYPE html>
<html>
  <head>
    <title>Group Overview</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/css/bootstrap.css">
    <link rel="stylesheet" href="/css/group.css">
  </head>

  <script>
    (g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.${c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})({
      key: "AIzaSyDf8c_RldjfbjhoyNzxzEYMXt3v8rAVToQ",
      v: "weekly",
    });
  </script>

  <body>
    <header>
      <div class="container-fluid">
          <h1 id="groupName" class="fw-semibold"></h1>
          <p id="groupDescription" class="text-muted"></p>
          <p id="startEnd" class="text-muted"></p>
          <a href="/fyp" class="btn btn-link mb-3" id="back">&larr; Back to groups</a>
      </div>
    </header>

    <div class="container" id="groupContent">

      <button class="border rounded-3 p-1 text-decoration-none" type="buttton" 
        data-bs-toggle="offcanvas" data-bs-target="#offcanvas1" 
        aria-controls="offcanvasExample"
        id="sidebarBtn">
          <i class="bi bi-list bi-lg py-2 p-1"></i>
          Open Menu
      </button>

      <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvas1">
        
        <div class="offcanvas-header">
          <h2> Group navigation</h2>
          <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>

        <div class="offcanvas-body">
          <div class="sidebar">  
            <div class="menu">
              <button class="btn btn-outline-primary" data-section="members">
                <i class="bi bi-people-fill me-2"></i>
                Members
              </button>
            </div>
            <div class="menu">
              <button class="btn btn-outline-primary" data-section="settings">
                <i class="bi bi-gear-fill me-2"></i>
                Settings
              </button>
            </div>
            <div class="menu">
              <button class="btn btn-outline-primary" data-section="chat">
                <i class="bi bi-chat-dots-fill me-2"></i>
                Chat
              </button>
            </div>
            <div class="menu">
              <button class="btn btn-outline-primary" data-section="map">
                <i class="bi bi-map-fill me-2"></i>
                Map Overview
              </button>
            </div>
            <div class="menu">
              <button class="btn btn-outline-primary" data-section="polls">
                <i class="bi bi-question-circle-fill me-2"></i>
                Polls
              </button>
            </div>
          </div>
        </div>

      </div>

      <div class="content" id="dynamicContent"></div> <!-- content here :D -->

      <!-- profile Page Modal -->
      <div class="modal fade" id="profilePageModal" tabindex="-1" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered modal-lg">
              <div class="modal-content">

                  <!-- Banner -->
                  <div id="profileBanner" class="position-relative" style="height: 180px; background: #cccccc;">
                      <img id="profilePicture"
                          src="/uploads/default.png"
                          class="rounded-circle position-absolute"
                          style="width: 120px; height: 120px; object-fit: cover; bottom: -60px; left: 20px; border: 4px solid white;">
                  </div>

                  <div class="modal-body mt-5">

                      <!-- VIEW MODE -->
                      <div id="profileViewMode">
                          <h3 id="displayName" class="fw-bold">Display Name</h3>
                          <p id="username" class="text-muted">@username</p>
                          <p id="bio">This is the user bio.</p>

                          <div id="profileActionContainer"></div>

                          <div id="friendActionContainer" class="mt-2"></div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
    </div>

    <script>
      window.groupId = "<%= groupId %>";
    </script>
    <script src="/js/bootstrap.bundle.js"></script> <!-- KEEP THIS HERE FOR PARTIALS WITH POPUPS -->
    <script src="/js/group.js"></script>
    <script src="/socket.io/socket.io.js"></script> <!-- here for chat -->
  </body>
</html>